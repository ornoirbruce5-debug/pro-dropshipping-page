<!DOCTYPE html>
<html lang="rw">
<head>
  <!-- =========================================================
       Boutique LP â€” Gihosha Gisandema
       - HTML, CSS, JS gusa
       - Fully responsive (mobile + desktop)
       - Video background + fallback image
       - Dark mode toggle
       - Smooth scrolling + reveal animations
       - Audio snippet (Kirundi)
       - Chatbot (Puter.js style logic), TTS
       - Embedded Stock JSON + live search
       - Daily Joke Spinner (localStorage)
       - Google Maps embed (coords included)
       - Contact Form (FormSubmit)
       - WhatsApp Support + QR
       - SEO tags
       ========================================================= -->

  <!-- Meta & SEO -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Boutique | Gihosha Gisandema â€” Ibiciro byiza, serivisi nziza</title>
  <meta name="description" content="Boutique yacu mu Gihosha Gisandema: ibiciro byiza, serivisi nziza, chatbot mu Kinyarwanda, stock live, nâ€™amajwi yo kuganiriza abakiriya.">
  <meta name="keywords" content="Boutique, Gihosha, Gisandema, ibicuruzwa, igiciro, Kinyarwanda, WhatsApp, Kigali, Bujumbura, stock, umupira, ikariso, ingofero">
  <meta name="author" content="Boutique Gihosha Gisandema">
  <link rel="canonical" href="https://example.com/">
  <meta property="og:title" content="Boutique | Gihosha Gisandema â€” Ibiciro byiza, serivisi nziza">
  <meta property="og:description" content="Chatbot mu Kinyarwanda, stock live, amafoto ako kanya, nâ€™aho duherereye kuri Google Maps.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://example.com/">
  <meta property="og:image" content="fallback.jpg">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Preloads -->
  <link rel="preload" href="fallback.jpg" as="image">
  <link rel="preload" href="background.mp4" as="video">
  <link rel="preload" href="audio.mp3" as="audio">

  <!-- Styles -->
  <style>
    /* ======================== Variables & Base ======================== */
    :root {
      --bg: #0f1216; --fg: #eaeef4; --muted: #a9b1ba;
      --brand: #4fd1c5; --accent: #9f7aea; --danger: #ff5a5f;
      --card: #171a20; --border: #2a2e36;
      --shadow: 0 10px 25px rgba(0,0,0,0.35);
      --max: 1100px;
    }
    :root.light {
      --bg: #f7f9fc; --fg: #121417; --muted: #5c6670;
      --brand: #0ea5e9; --accent: #7c3aed; --danger: #dc2626;
      --card: #ffffff; --border: #e5e7eb;
      --shadow: 0 10px 25px rgba(0,0,0,0.12);
    }
    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      background: var(--bg); color: var(--fg); line-height: 1.6;
    }
    a { color: var(--brand); text-decoration: none; }
    img, video { max-width: 100%; display: block; }
    .container { width: 100%; max-width: var(--max); margin: 0 auto; padding: 24px; }
    button {
      background: var(--brand); color: #041018; border: none; padding: 12px 18px; border-radius: 10px;
      font-weight: 600; cursor: pointer; transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
    }
    button:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
    button:focus { outline: 3px solid var(--accent); outline-offset: 3px; }
    .btn-outline { background: transparent; color: var(--fg); border: 1.5px solid var(--border); }

    /* ======================== Navbar ======================== */
    header.nav {
      position: fixed; top: 0; left: 0; right: 0; z-index: 50;
      backdrop-filter: blur(8px);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
      border-bottom: 1px solid var(--border);
    }
    .nav-inner { display: flex; align-items: center; justify-content: space-between; gap: 16px; padding: 12px 24px; }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 800; letter-spacing: .2px; }
    .brand .dot { width: 10px; height: 10px; background: var(--brand); border-radius: 50%; box-shadow: var(--shadow); }
    nav ul { display: flex; gap: 16px; padding: 0; margin: 0; list-style: none; }
    nav a { padding: 8px 12px; border-radius: 8px; }
    nav a:hover { background: color-mix(in oklab, var(--card) 65%, transparent); }

    /* ======================== Hero ======================== */
    .hero {
      position: relative; min-height: 100vh; display: grid; place-items: center; overflow: hidden;
    }
    .hero video, .hero .fallback {
      position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover;
      filter: saturate(110%) contrast(105%) brightness(80%);
    }
    .hero::after {
      content: ""; position: absolute; inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.65), rgba(0,0,0,0.25) 40%, rgba(0,0,0,0.0));
    }
    .hero-content {
      position: relative; z-index: 2; text-align: center; padding: 24px; max-width: 860px;
      animation: fadeInUp .8s ease both;
    }
    .hero h1 { font-size: clamp(2rem, 4vw, 3rem); margin: 0 0 12px; }
    .hero p { color: var(--muted); margin: 0 0 18px; font-size: clamp(1rem, 2.5vw, 1.25rem); }
    .hero-ctas { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; justify-content: center; }
    .audio-inline { display: inline-flex; align-items: center; gap: 10px; padding: 8px 12px; border-radius: 12px; background: color-mix(in oklab, var(--card) 75%, transparent); border: 1px solid var(--border); }
    .toggle { background: color-mix(in oklab, var(--card) 70%, transparent); color: var(--fg); border: 1px solid var(--border); }

    /* ======================== Sections ======================== */
    section { padding: 90px 0; }
    .section-title { font-size: clamp(1.5rem, 3vw, 2rem); margin-bottom: 16px; }
    .section-sub { color: var(--muted); margin-bottom: 24px; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow); }

    /* ======================== Stock ======================== */
    .stock-controls { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 16px; }
    .search { flex: 1; display: flex; align-items: center; gap: 10px; background: color-mix(in oklab, var(--card) 70%, transparent); border: 1px solid var(--border); border-radius: 12px; padding: 8px 12px; }
    .search input { flex: 1; background: transparent; border: none; outline: none; color: var(--fg); padding: 8px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 12px; border-bottom: 1px solid var(--border); text-align: left; vertical-align: middle; }
    tbody tr { opacity: 0; transform: translateY(12px); }
    tbody tr.revealed { opacity: 1; transform: translateY(0); transition: opacity .5s ease, transform .5s ease; }
    .stock-img { width: 72px; height: 72px; object-fit: cover; border-radius: 10px; border: 1px solid var(--border); }

    /* ======================== Testimonials ======================== */
    .testimonials { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; }
    .testimonial { padding: 16px; }
    .stars { color: gold; letter-spacing: 2px; }

    /* ======================== Joke Spinner ======================== */
    .joke-box { padding: 18px; display: grid; gap: 12px; }
    .joke-text { font-size: 1.05rem; }

    /* ======================== Chatbot ======================== */
    .chatbot { display: grid; grid-template-columns: 1fr; gap: 16px; }
    .chat-window {
      height: 320px; overflow: auto; padding: 16px; border-radius: 12px;
      background: color-mix(in oklab, var(--card) 85%, transparent); border: 1px solid var(--border);
    }
    .msg { padding: 10px 12px; border-radius: 12px; margin-bottom: 10px; width: fit-content; max-width: 85%; box-shadow: var(--shadow); }
    .msg.user { background: #1f2937; color: #fff; margin-left: auto; }
    .msg.bot { background: #0b7d76; color: #041018; }
    .msg img { margin-top: 6px; border-radius: 10px; border: 1px solid var(--border); max-width: 220px; }
    .input-row { display: grid; grid-template-columns: 1fr auto auto auto; gap: 8px; }
    .input-row input { padding: 12px; border-radius: 10px; border: 1px solid var(--border); background: color-mix(in oklab, var(--card) 75%, transparent); color: var(--fg); }

    /* ======================== Support & Footer ======================== */
    .support { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; }
    .footer { padding: 24px; border-top: 1px solid var(--border); background: color-mix(in oklab, var(--card) 70%, transparent); }
    .socials { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .qr { width: 120px; height: auto; border-radius: 12px; border: 1px solid var(--border); }

    /* ======================== Reveal Animations ======================== */
    .reveal { opacity: 0; transform: translateY(16px); }
    .reveal.active { opacity: 1; transform: translateY(0); transition: opacity .6s ease, transform .6s ease; }
    @keyframes fadeInUp { from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);} }

    /* ======================== Responsive ======================== */
    @media (max-width: 640px) { .input-row { grid-template-columns: 1fr auto auto; } nav ul { display: none; } }
  </style>
</head>
<body>
  <!-- ======================== Navbar ======================== -->
  <header class="nav" role="banner">
    <div class="nav-inner">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <span>Boutique | Gihosha Gisandema</span>
      </div>
      <nav aria-label="Inyandiko zâ€™imbere">
        <ul>
          <li><a href="#hero">Ahabanza</a></li>
          <li><a href="#stock">Ibicuruzwa</a></li>
          <li><a href="#feedback">Testimonials</a></li>
          <li><a href="#jokes">Joke</a></li>
          <li><a href="#chatbot">Chatbot</a></li>
          <li><a href="#maps">Aho duherereye</a></li>
          <li><a href="#contact">Twandikire</a></li>
        </ul>
      </nav>
      <button id="darkToggle" class="toggle" aria-label="Hindura dark mode">ğŸŒ™ Dark</button>
    </div>
  </header>

  <!-- ======================== Hero Section (Video + Fallback + Audio + CTA) ======================== -->
  <section id="hero" class="hero">
    <video id="bgVideo" autoplay muted loop playsinline poster="fallback.jpg">
      <source src="background.mp4" type="video/mp4">
    </video>
    <img class="fallback" src="fallback.jpg" alt="Boutique background" onerror="this.style.display='none'">

    <div class="hero-content">
      <h1>Dushorere kugiciro gito ğŸ›ï¸</h1>
      <p>Murakaza neza muri boutique yacuâ€”turakira abakiriya, tubaganiriza mu ijwi, kandi tubereka ibicuruzwa byihuse.</p>

      <!-- Audio snippet: FR intro + Kirundi body (src="audio.mp3") -->
      <div class="audio-inline" aria-live="polite">
        <span>ğŸ§ Audio (FR intro + Kirundi):</span>
        <audio id="welcomeAudio" controls src="audio.mp3"></audio>
      </div>

      <!-- CTA button with focus accessibility -->
      <div class="hero-ctas" style="margin-top: 18px;">
        <button id="ctaBuy" aria-label="Dushorere kugiciro gito">Dushorere kugiciro gito</button>
        <a href="#stock"><button class="btn-outline">Reba ibicuruzwa</button></a>
      </div>
    </div>
  </section>

  <main>
    <!-- ======================== Stock Section (Table + Search + Embedded JSON) ======================== -->
    <section id="stock" class="container reveal">
      <h2 class="section-title">Ibicuruzwa biri muri stock ğŸ“¦</h2>
      <p class="section-sub">Shakisha, urebe amafoto, ibisobanuro, nâ€™ibiciroâ€”hanze aha byose biri live.</p>

      <!-- Search controls -->
      <div class="stock-controls">
        <div class="search">
          <span>ğŸ”</span>
          <input id="searchInput" type="text" placeholder="Andika: 'ikariso', 'umupira', 'ingofero'..." aria-label="Shakisha ibicuruzwa">
        </div>
        <button id="resetSearch" class="btn-outline">Siba filter</button>
      </div>

      <!-- Table -->
      <div class="card">
        <table aria-label="Table yâ€™ibicuruzwa">
          <thead>
            <tr>
              <th>Image</th>
              <th>Ibisobanuro</th>
              <th>Igiciro</th>
            </tr>
          </thead>
          <tbody id="stockBody"></tbody>
        </table>
      </div>
    </section>

    <!-- ======================== Feedback Section (Testimonials + Emojis + Stars) ======================== -->
    <section id="feedback" class="container reveal">
      <h2 class="section-title">Testimonials zâ€™abakiriya ğŸ˜Š</h2>
      <p class="section-sub">Ibyiyumviro byâ€™abadukundaâ€”stars, emojis, nâ€™ubuzima bwa boutique.</p>
      <div class="testimonials">
        <div class="card testimonial">
          <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
          <p>â€œSerivisi nziza cane, igiciro kiri hasi, kandi ibicuruzwa ni byiza!â€ ğŸ˜</p>
          <small>â€” Ange M.</small>
        </div>
        <div class="card testimonial">
          <div class="stars">â˜…â˜…â˜…â˜…â˜†</div>
          <p>â€œChatbot yambwiye vuba ibyo nkeneye, kandi ifoto yâ€™icyo nasabye yahise igaragara.â€ ğŸ¤©</p>
          <small>â€” Didier K.</small>
        </div>
        <div class="card testimonial">
          <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
          <p>â€œWhatsApp autoresponder yanyu irihuta, ndabashimiye!â€ ğŸ™Œ</p>
          <small>â€” Aline T.</small>
        </div>
      </div>
    </section>

    <!-- ======================== Daily Joke Spinner (Kirundi + localStorage + TTS button) ======================== -->
    <section id="jokes" class="container reveal">
      <h2 class="section-title">Joke nshasha yâ€™uyu munsi ğŸ˜„</h2>
      <p class="section-sub">Duseke hamwe: joke nshasha buri munsi, ntisubirwamoâ€”ibikwa muri localStorage.</p>

      <div class="card joke-box">
        <div id="jokeText" class="joke-text">Kanda â€œHindura jokeâ€ kugira ngo ubone urukurikirane rushasha.</div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button id="newJoke">ğŸ”„ Hindura joke</button>
          <button id="speakJoke" class="btn-outline">ğŸ—£ï¸ Soma mu ijwi</button>
          <span id="jokeDate" style="color:var(--muted);"></span>
        </div>
      </div>
    </section>

    <!-- ======================== Chatbot Section (Puter.js-style logic + emojis + images + TTS) ======================== -->
    <section id="chatbot" class="container reveal">
      <h2 class="section-title">Chatbot yâ€™ ubwenge ğŸ¤–</h2>
      <p class="section-sub">Andika mu Kinyarwandaâ€”chatbot itahura icyifuzo, igusubize ibijyanye nâ€™ibicuruzwa, igaragaze ifoto, kandi iganirize mu ijwi.</p>

      <div class="chatbot">
        <div id="chatWindow" class="chat-window" aria-live="polite" aria-label="Ahagaragara ubutumwa bwa chatbot"></div>

        <div class="input-row">
          <input id="chatInput" type="text" placeholder="Andika: 'Ndashaka umupira wâ€™umugabo wâ€™icyatsi' ..." aria-label="Injiza ubutumwa bwawe">
          <button id="sendBtn">ğŸ“¨ Ohereza</button>
          <button id="ttsBtn" class="btn-outline" title="Soma mu ijwi">ğŸ—£ï¸ TTS</button>
          <button id="imgGenBtn" class="btn-outline" title="Hanga ifoto hashingiwe ku bisobanuro">ğŸ–¼ï¸ Hanga ifoto</button>
        </div>
      </div>
    </section>

    <!-- ======================== Google Maps Embed (Gihosha Gisandema) ======================== -->
    <section id="maps" class="container reveal">
      <h2 class="section-title">Aho duherereye ğŸ—ºï¸</h2>
      <p class="section-sub">Gihosha Gisandema â€” koordinates: Latitude -3.36392Â°, Longitude 29.378Â°.</p>
      <div class="card" style="overflow:hidden;">
        <iframe
          title="Gihosha Gisandema Location"
          src="https://maps.google.com/maps?q=-3.36392,29.378&z=15&output=embed"
          width="100%" height="380" style="border:0" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </section>

    <!-- ======================== Contact Form (FormSubmit) ======================== -->
    <section id="contact" class="container reveal">
      <h2 class="section-title">Twandikire âœ‰ï¸</h2>
      <p class="section-sub">Uzuza formâ€”tukagusubiza vuba. Iyo ukanda CTA, subject iruzura automatic.</p>

      <form id="contactForm" class="card" style="padding:16px;" method="POST" action="https://formsubmit.co/ornoirbruce5@gmail.com">
        <div style="display:grid; gap:12px;">
          <label>
            <span>Izina</span>
            <input type="text" name="name" required placeholder="Izina ryawe" style="width:100%; padding:10px; border-radius:10px; border:1px solid var(--border); background:color-mix(in oklab, var(--card) 75%, transparent); color:var(--fg);" />
          </label>
          <label>
            <span>Email</span>
            <input type="email" name="email" required placeholder="email@example.com" style="width:100%; padding:10px; border-radius:10px; border:1px solid var(--border); background:color-mix(in oklab, var(--card) 75%, transparent); color:var(--fg);" />
          </label>
          <label>
            <span>Ubutumwa</span>
            <textarea name="message" required rows="4" placeholder="Andika hano..." style="width:100%; padding:10px; border-radius:10px; border:1px solid var(--border); background:color-mix(in oklab, var(--card) 75%, transparent); color:var(--fg);"></textarea>
          </label>

          <!-- Prefill subject via hidden input; set dynamically when CTA is clicked -->
          <input id="subjectField" type="hidden" name="_subject" value="Ubusabe bwo kugura - Boutique LP">
          <!-- Optional: redirect thank you page -->
          <input type="hidden" name="_next" value="https://example.com/thank-you.html">
          <input type="hidden" name="_captcha" value="false">

          <button type="submit">Ohereza âœ¨</button>
        </div>
      </form>
    </section>

    <!-- ======================== WhatsApp Support (link + maintenance + QR) ======================== -->
    <section id="support" class="container reveal">
      <h2 class="section-title">WhatsApp Support ğŸ’¬</h2>
      <p class="section-sub">Dutangaho ubufasha bwa maintenance & autoresponder. Kanda link yo kutuvugisha.</p>

      <div class="support">
        <div class="card" style="padding:16px;">
          <p><strong>Link ya WhatsApp:</strong></p>
          <p>
            <a id="waLink" target="_blank" rel="noopener" href="https://wa.me/25771633859?text=Mwaramutse%20Boutique%2C%20ndifuza%20kumenya%20ibiciro%20n%27ibicuruzwa.">
              ğŸ‘‰ Uduhamagare kuri WhatsApp
            </a>
          </p>
          <p style="color:var(--muted);">Message yiteguye: â€œMwaramutse Boutique, ndifuza kumenya ibiciro n'ibicuruzwa.â€</p>
        </div>

        <div class="card" style="padding:16px;">
          <p><strong>Maintenance & Autoresponder:</strong></p>
          <ul>
            <li>**Automation:** Tanga ibisubizo byihuse ku bibazo bikunze kwisubiramo.</li>
            <li>**Updates:** Menyesha stock nshasha nâ€™amapromo.</li>
            <li>**Support:** Ohereza amafoto yâ€™ibicuruzwa nâ€™amakuru yose akenewe.</li>
          </ul>
        </div>

        <div class="card" style="padding:16px; text-align:center;">
          <p><strong>QR Code ya WhatsApp</strong></p>
          <img src="whatsapp-qr.jpg" alt="QR code ya WhatsApp" class="qr">
          <p style="color:var(--muted);">Scan QR kugira ngo uhite uduvugisha.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- ======================== Footer ======================== -->
  <footer class="footer" role="contentinfo">
    <div class="container" style="display:grid; gap:8px;">
      <div style="display:flex; gap:16px; align-items:center; flex-wrap:wrap;">
        <span>ğŸ“ +25771633859</span> |
        <span>ğŸ“§ <a href="mailto:ornoirbruce5@gmail.com">ornoirbruce5@gmail.com</a></span> |
        <span>ğŸ“ Gihosha Gisandema</span>
      </div>
      <div class="socials">
        <a href="https://wa.me/25771633859" aria-label="WhatsApp">ğŸŸ¢ WhatsApp</a>
        <a href="https://instagram.com/yourboutique" aria-label="Instagram">ğŸŸ£ Instagram</a>
        <a href="https://facebook.com/yourboutique" aria-label="Facebook">ğŸ”µ Facebook</a>
      </div>
      <small style="color:var(--muted);">Â© <span id="year"></span> Boutique LP â€” Responsive & Smart.</small>
    </div>
  </footer>

  <!-- ======================== Embedded Stock JSON ======================== -->
  <script id="stockJSON" type="application/json">
  {
    "items": [
      {
        "id": "SKU-001",
        "name": "Umupira w'umugabo - Icyatsi",
        "desc": "Cotton 100%, size M/L, urushya neza.",
        "price": "24,000 Fbu",
        "img": "stock/umupira-icyatsi.jpg",
        "tags": ["umupira", "umugabo", "icyatsi"]
      },
      {
        "id": "SKU-002",
        "name": "Ikariso y'abagore - Umukara",
        "desc": "Kinyamwungere, breathable, size S/M/L.",
        "price": "9,500 Fbu",
        "img": "stock/ikariso-umukara.jpg",
        "tags": ["ikariso", "abagore", "umukara"]
      },
      {
        "id": "SKU-003",
        "name": "Ingofero ya summer - Beige",
        "desc": "Light straw hat, UV friend.",
        "price": "15,000 Fbu",
        "img": "stock/ingofero-beige.jpg",
        "tags": ["ingofero", "beige", "summer"]
      },
      {
        "id": "SKU-004",
        "name": "Ikaramu ya style - Silver",
        "desc": "Metal pen, refillable, premium feel.",
        "price": "6,000 Fbu",
        "img": "stock/ikaramu-silver.jpg",
        "tags": ["ikaramu", "silver"]
      },
      {
        "id": "SKU-005",
        "name": "Amasogisi - Classic",
        "desc": "Wool blend, ihumanye kandi ihumurirwa neza.",
        "price": "4,000 Fbu",
        "img": "stock/socks-classic.jpg",
        "tags": ["amasogisi", "socks", "classic"]
      }
    ]
  }
  </script>

  <!-- ======================== Main Script: Logic & Interactions ======================== -->
  <script>
    // ==================== SEO micro: dynamic year ====================
    document.getElementById('year').textContent = new Date().getFullYear();

    // ==================== Dark Mode Toggle ====================
    const root = document.documentElement;
    const darkToggle = document.getElementById('darkToggle');
    const MODE_KEY = 'lp_mode';
    const savedMode = localStorage.getItem(MODE_KEY);
    if (savedMode === 'light') root.classList.add('light');
    darkToggle.addEventListener('click', () => {
      root.classList.toggle('light');
      localStorage.setItem(MODE_KEY, root.classList.contains('light') ? 'light' : 'dark');
    });

    // ==================== Video fallback ====================
    const bgVideo = document.getElementById('bgVideo');
    bgVideo.addEventListener('error', () => { bgVideo.style.display = 'none'; });

    // ==================== CTA Prefill Subject & WA message ====================
    const ctaBuy = document.getElementById('ctaBuy');
    const subjectField = document.getElementById('subjectField');
    const waLink = document.getElementById('waLink');
    function setWAMessage(msg) {
      const base = 'https://wa.me/25771633859?text=';
      waLink.href = base + encodeURIComponent(msg);
    }
    ctaBuy.addEventListener('click', () => {
      subjectField.value = 'Ndashaka kugura - Dushorere kugiciro gito';
      setWAMessage('Mwaramutse Boutique, ndifuza kuguraâ€”munsindikize urutonde rwâ€™ibiciro nâ€™ibicuruzwa.');
      document.querySelector('#contact').scrollIntoView({ behavior: 'smooth' });
    });

    // ==================== Reveal Animations ====================
    const revealEls = document.querySelectorAll('.reveal');
    const io = new IntersectionObserver(entries => {
      entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('active'); });
    }, { threshold: 0.2 });
    revealEls.forEach(el => io.observe(el));

    // ==================== Stock Load & Live Search ====================
    const stock = JSON.parse(document.getElementById('stockJSON').textContent).items;
    const stockBody = document.getElementById('stockBody');
    const searchInput = document.getElementById('searchInput');
    const resetSearch = document.getElementById('resetSearch');

    function renderStock(list) {
      stockBody.innerHTML = '';
      list.forEach((item, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><img class="stock-img" src="${item.img}" alt="${item.name}"></td>
          <td>
            <strong>${item.name}</strong><br>
            <small style="color:var(--muted)">${item.desc}</small>
          </td>
          <td><strong>${item.price}</strong></td>
        `;
        stockBody.appendChild(tr);
        setTimeout(() => tr.classList.add('revealed'), 80 * idx); // animated entry
      });
    }
    renderStock(stock);

    function filterStock(query) {
      const q = query.trim().toLowerCase();
      const res = stock.filter(item =>
        item.name.toLowerCase().includes(q) ||
        item.desc.toLowerCase().includes(q) ||
        item.tags.some(t => t.toLowerCase().includes(q))
      );
      renderStock(res);
    }
    searchInput.addEventListener('input', e => filterStock(e.target.value));
    resetSearch.addEventListener('click', () => { searchInput.value = ''; renderStock(stock); });

    // ==================== Daily Joke Spinner (localStorage) ====================
    const jokes = [
      "Uwo waguze ikariso ebyiri, yagarutse ati: 'Ziri twinye?' â€” Twamubwiye: 'Ziri twinye ku kugura bidatinze!' ğŸ˜‚",
      "Umukiriya ati: 'Mwafise ingofero yâ€™ikirere?' â€” Uti: 'Dufise iyoroshe nkâ€™ikirere!' ğŸ˜„",
      "Uti: 'Igiciro gito si ko atari ciza' â€” Twebwe duhuza byombi! ğŸ˜‰",
      "Nti: 'Umupira wâ€™icyatsi urashobora kundera amahirwe?' â€” Uti: 'Uzatahana nâ€™intsinzi!' ğŸŒ¿",
      "Umubanyi aje kwiyamiriza igiciro, arangije agura kabiri! ğŸ¤­"
    ];
    const JOKE_KEY = 'lp_joke_of_day';
    const jokeText = document.getElementById('jokeText');
    const jokeDate = document.getElementById('jokeDate');
    const newJokeBtn = document.getElementById('newJoke');
    const speakJokeBtn = document.getElementById('speakJoke');

    function todaysKey() {
      const d = new Date();
      return `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;
    }
    function setDailyJoke(forceNew=false) {
      const key = todaysKey();
      let saved = JSON.parse(localStorage.getItem(JOKE_KEY) || '{}');
      if (!saved[key] || forceNew) {
        const pick = jokes[Math.floor(Math.random() * jokes.length)];
        saved[key] = pick;
        localStorage.setItem(JOKE_KEY, JSON.stringify(saved));
      }
      jokeText.textContent = saved[key];
      jokeDate.textContent = `Uyu munsi: ${key}`;
    }
    setDailyJoke(false);
    newJokeBtn.addEventListener('click', () => setDailyJoke(true));

    // ==================== TTS (Text-to-Speech) â€” soma mu ijwi ====================
    function speakText(text, lang='rw-RW') {
      if (!('speechSynthesis' in window)) return alert('TTS ntishigikiwe na browser.');
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = lang;
      const voices = speechSynthesis.getVoices();
      const voiceMatch = voices.find(v => v.lang.toLowerCase().startsWith(lang.split('-')[0]));
      if (voiceMatch) utter.voice = voiceMatch;
      speechSynthesis.cancel();
      speechSynthesis.speak(utter);
    }
    speakJokeBtn.addEventListener('click', () => speakText(jokeText.textContent, 'rw-RW'));

    // ==================== Chatbot (Puter.js-style logic) ====================
    const chatWindow = document.getElementById('chatWindow');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const ttsBtn = document.getElementById('ttsBtn');
    const imgGenBtn = document.getElementById('imgGenBtn');

    function pushMsg(text, who='bot', imgUrl=null) {
      const div = document.createElement('div');
      div.className = `msg ${who}`;
      div.innerHTML = text.replace(/\n/g, '<br>');
      if (imgUrl) {
        const img = document.createElement('img');
        img.src = imgUrl;
        img.alt = 'Ifoto yasabwe';
        div.appendChild(img);
      }
      chatWindow.appendChild(div);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    // Emojis based on sentiment/keywords
    function sentimentEmojis(txt) {
      const t = txt.toLowerCase();
      if (t.includes('amakuru') || t.includes('ndabaza')) return 'â“';
      if (t.includes('ndashaka') || t.includes('mumpere')) return 'ğŸ›ï¸';
      if (t.includes('igiciro') || t.includes('bangahe')) return 'ğŸ’¸';
      if (t.includes('ibyiza') || t.includes('birakomeye')) return 'âœ¨';
      if (t.includes('mwaramutse') || t.includes('mwiriwe')) return 'ğŸ‘‹';
      return 'ğŸ™‚';
    }

    // Intent detection â€” rule-based (product lookup, price, greeting, image request, fallback)
    function detectIntent(text) {
      const t = text.toLowerCase();
      const product = stock.find(item =>
        item.name.toLowerCase().includes(t) ||
        item.tags.some(tag => t.includes(tag.toLowerCase()))
      );
      if (product) return { type: 'product.lookup', product };
      if (t.includes('igiciro') || t.includes('bangahe')) return { type: 'price.inquiry' };
      if (/(mwaramutse|mwiriwe|bonsoir|bonjour|salut)/i.test(t)) return { type: 'greet' };
      if (t.includes('ifoto') || t.includes('shushanya') || t.includes('hanga')) return { type: 'image.request' };
      return { type: 'fallback' };
    }

    function respond(userText) {
      const emo = sentimentEmojis(userText);
      const intent = detectIntent(userText);

      if (intent.type === 'greet') {
        pushMsg(`Mwaramutse! Turaguhereza serivisi nziza kandi igiciro kigufi ${emo}\nVuga icyo ushaka: umupira, ikariso, ingofero...`);
        return;
      }
      if (intent.type === 'price.inquiry') {
        pushMsg(`Igiciro giterwa nâ€™icyo uhisemo. Andika izina ryâ€™igicuruzwa cyangwa uko kigomba kuba, tugusubize igiciro ${emo}`);
        return;
      }
      if (intent.type === 'product.lookup') {
        const p = intent.product;
        pushMsg(`Twabonye: ${p.name} â€” ${p.desc}\nIgiciro: ${p.price} ${emo}`, 'bot', p.img);
        return;
      }
      if (intent.type === 'image.request') {
        // Placeholder: stock photo based on description (simulate txt2img/stock)
        const hint = userText.replace(/.*(ifoto|shushanya|hanga)/gi, '').trim() || 'fashion item';
        const url = `https://source.unsplash.com/600x400/?${encodeURIComponent(hint)}`;
        pushMsg(`Duhangiye ifoto hashingiwe ku bisobanuro byawe: â€œ${hint}â€ ${emo}`, 'bot', url);
        return;
      }
      // Fallback â€” try partial tag match
      const words = userText.toLowerCase().split(/\s+/);
      const matched = stock.filter(item => item.tags.some(tag => words.includes(tag.toLowerCase())));
      if (matched.length) {
        const p = matched[0];
        pushMsg(`Hari: ${p.name} â€” ${p.desc}\nIgiciro: ${p.price} ${emo}`, 'bot', p.img);
      } else {
        pushMsg(`Ndumvise ko ushaka: â€œ${userText}â€. Subiza utereke neza: izina ryâ€™igicuruzwa, ibara, size, nâ€™igiciro wifuza ${emo}`);
      }
    }

    sendBtn.addEventListener('click', () => {
      const text = chatInput.value.trim();
      if (!text) return;
      pushMsg(text, 'user');
      respond(text);
      chatInput.value = '';
    });
    chatInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') sendBtn.click(); });

    // TTS â€” soma ubutumwa bwa nyuma bwa bot mu Kinyarwanda
    ttsBtn.addEventListener('click', () => {
      const msgs = Array.from(document.querySelectorAll('.msg.bot'));
      if (!msgs.length) return;
      const last = msgs[msgs.length - 1].textContent.trim();
      speakText(last, 'rw-RW');
    });

    // Img gen button â€” based on current input or generic
    imgGenBtn.addEventListener('click', () => {
      const text = chatInput.value.trim() || 'fashion boutique item';
      const url = `https://source.unsplash.com/600x400/?${encodeURIComponent(text)}`;
      pushMsg(`Duhangiye ifoto: â€œ${text}â€ ğŸ–¼ï¸`, 'bot', url);
      chatInput.value = '';
    });

    // ==================== Accessibility micro enhancements ====================
    stockBody.addEventListener('DOMNodeInserted', () => {
      Array.from(stockBody.children).forEach(tr => tr.setAttribute('tabindex', '0'));
    });
  </script>
</body>
</html>
